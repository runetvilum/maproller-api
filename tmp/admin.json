{
  "docs": [
    {
      "_id": "_design/organization",
      "filters": {
        "template": "function (doc, req) {\n    if (doc._deleted) {\n        return true;\n    }\n    if (doc.type != 'app') {\n        return false;\n    }\n    if (doc.template != req.query.template) {\n        return false;\n    }\n    return true;\n}"
      },
      "language": "javascript",
      "views": {
        "apps": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'app') {\n        emit(doc.organization, {\n            name: doc.name,\n            template: doc.template\n        });\n    }\n}"
        },
        "databases": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'database') {\n        emit(doc.organization, doc.name);\n    }\n}"
        },
        "maps": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'map') {\n        emit(doc.organization, doc);\n    }\n}"
        },
        "organizations": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'organization') {\n        emit(doc._id, doc);\n    }\n}"
        }
      }
    },
    {
      "_id": "_design/templates",
      "language": "javascript",
      "views": {
        "all": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'template') {\n        emit(doc.name, null);\n    }\n}"
        },
        "organization": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'template' && doc.organizations) {\n        for (var i = 0; i < doc.organizations.length; i++) {\n            emit(doc.organizations[i], doc.name);\n        }\n    }\n}"
        }
      }
    },
    {
      "_id": "_design/database",
      "views": {
        "emailtemplate": {
          "map": "function (doc) {\n    if (doc.type && doc.type === 'emailtemplate') {\n        emit([doc.database, doc.action], doc.name);\n    }\n}",
          "reduce": "function (keys, values, rereduce) {\n    if (rereduce) {\n        return sum(values);\n    } else {\n        return values.length;\n    }\n}"
        }
      },
      "language": "javascript"
    }
  ]
}